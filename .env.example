# ============================================================
# SmartBeak Environment Configuration
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control
# ============================================================

# ============================================================
# Database (Required)
# ============================================================
CONTROL_PLANE_DB=postgresql://user:password@localhost:5432/smartbeak

# ============================================================
# Clerk Authentication (Required)
# Get these from https://dashboard.clerk.dev
# ============================================================
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_YOUR_PUBLISHABLE_KEY
CLERK_SECRET_KEY=sk_test_YOUR_SECRET_KEY
CLERK_WEBHOOK_SECRET=whsec_YOUR_WEBHOOK_SECRET

# ============================================================
# Stripe Payments (Required for billing)
# Get these from https://dashboard.stripe.com
# ============================================================
STRIPE_SECRET_KEY=sk_test_YOUR_STRIPE_SECRET_KEY
STRIPE_WEBHOOK_SECRET=whsec_YOUR_STRIPE_WEBHOOK_SECRET

# ============================================================
# Paddle Payments (Alternative payment provider)
# Get these from https://vendors.paddle.com
# ============================================================
PADDLE_API_KEY=your_paddle_api_key
PADDLE_WEBHOOK_SECRET=pdl_ntfset_YOUR_WEBHOOK_SECRET

# ============================================================
# Phase 2: Keyword Research APIs
# ============================================================

# Ahrefs API (for keyword research)
# Get from https://ahrefs.com/v3/api
AHREFS_API_TOKEN=your_ahrefs_api_token

# Google Search Console API
# Get from https://console.cloud.google.com/apis/credentials
GSC_CLIENT_ID=your_google_client_id
GSC_CLIENT_SECRET=your_google_client_secret
GSC_REDIRECT_URI=http://localhost:3000/api/auth/gsc/callback

# SERP API for PAA (People Also Ask)
# Options: serpapi, dataforseo, custom
SERP_API_PROVIDER=serpapi
SERP_API_KEY=your_serpapi_key

# DataForSEO (alternative SERP provider)
DATAFORSEO_LOGIN=your_dataforseo_login
DATAFORSEO_PASSWORD=your_dataforseo_password

# Custom SERP scraper endpoint (if using custom provider)
CUSTOM_SERP_ENDPOINT=https://your-scraper.com

# ============================================================
# Phase 2: Email Configuration
# ============================================================

# Email From Configuration
EMAIL_FROM=noreply@smartbeak.io
EMAIL_FROM_NAME=SmartBeak
EMAIL_REPLY_TO=support@smartbeak.io

# AWS SES (recommended for production)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1

# SMTP (alternative)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password
SMTP_SECURE=false

# SendGrid (alternative)
SENDGRID_API_KEY=SG.your_sendgrid_api_key

# Postmark (alternative)
POSTMARK_SERVER_TOKEN=your_postmark_token

# ============================================================
# Phase 2: Social Media Publishing APIs
# ============================================================

# LinkedIn API
# Get from https://www.linkedin.com/developers/apps
LINKEDIN_CLIENT_ID=your_linkedin_client_id
LINKEDIN_CLIENT_SECRET=your_linkedin_client_secret
LINKEDIN_REDIRECT_URI=http://localhost:3000/api/auth/linkedin/callback

# Google Business Profile API
# Get from https://console.cloud.google.com/apis/credentials
GBP_CLIENT_ID=your_gbp_client_id
GBP_CLIENT_SECRET=your_gbp_client_secret
GBP_REDIRECT_URI=http://localhost:3000/api/auth/gbp/callback

# GBP Token Encryption Key (REQUIRED - 32 bytes hex for AES-256-GCM)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
GBP_TOKEN_ENCRYPTION_KEY=your_32_byte_hex_encryption_key_here

# TikTok API
# Get from https://developers.tiktok.com/
TIKTOK_CLIENT_KEY=your_tiktok_client_key
TIKTOK_CLIENT_SECRET=your_tiktok_client_secret
TIKTOK_REDIRECT_URI=http://localhost:3000/api/auth/tiktok/callback

# ============================================================
# Phase 2: Affiliate Revenue APIs
# ============================================================

# Amazon Associates / Product Advertising API
# Get from https://affiliate-program.amazon.com/
AMAZON_ACCESS_KEY=your_amazon_access_key
AMAZON_SECRET_KEY=your_amazon_secret_key
AMAZON_ASSOCIATE_TAG=yourtag-20
AMAZON_MARKETPLACE=US

# Commission Junction (CJ)
# Get from https://developers.cj.com/
CJ_PERSONAL_TOKEN=your_cj_personal_token
CJ_WEBSITE_ID=your_cj_website_id

# Impact (Impact Radius)
# Get from https://app.impact.com/
IMPACT_ACCOUNT_SID=your_impact_account_sid
IMPACT_AUTH_TOKEN=your_impact_auth_token
IMPACT_API_URL=https://api.impact.com

# ============================================================
# Phase 3: Image Generation APIs
# ============================================================

# OpenAI (DALL-E)
# Get from https://platform.openai.com/
OPENAI_API_KEY=sk-your_openai_key

# Stability AI
# Get from https://platform.stability.ai/
STABILITY_API_KEY=sk-your_stability_key

# ============================================================
# Phase 3: Job Queue (Redis)
# ============================================================

REDIS_URL=redis://localhost:6379
# OR for production:
# REDIS_URL=redis://username:password@host:port/db

# ============================================================
# Phase 4: Security & Encryption
# Generate: openssl rand -base64 48  (or use the node command below)
# Rotation: Deploy JWT_KEY_2 first (verification), then JWT_KEY_1 (signing).
#           KEY_ENCRYPTION_SECRET requires re-encrypting stored secrets before rotation.
# ============================================================

# JWT Signing Keys (for control-plane API authentication)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# IMPORTANT: JWT_KEY_1 and JWT_KEY_2 must be DIFFERENT values
JWT_KEY_1=your-jwt-signing-key-1-here-minimum-32-bytes-long
JWT_KEY_2=your-jwt-signing-key-2-here-minimum-32-bytes-long
JWT_AUDIENCE=smartbeak
JWT_ISSUER=smartbeak-api

# Key Encryption Secret (must be 32+ bytes for AES-256)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
KEY_ENCRYPTION_SECRET=your-32-byte-encryption-secret-key-here

# ============================================================
# Phase 4: Monitoring & Alerts
# ============================================================

# Slack Webhook for alerts
# Get from https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Custom webhook for alerts (optional)
ALERT_WEBHOOK_URL=https://your-system.com/webhooks/alerts

# ============================================================
# Optional: Infrastructure & Monitoring
# ============================================================

# ============================================================
# Shard Deployment & Vercel Direct Upload (NEW)
# ============================================================

# Vercel API Token
# Get from https://vercel.com/account/tokens
VERCEL_TOKEN=your_vercel_token

# Vercel Team ID (optional, for team deployments)
VERCEL_TEAM_ID=team_xxx

# ============================================================
# Object Storage (R2/S3) for Shard Files (NEW)
# ============================================================

# Storage Backend Provider
# Options: r2, s3, gcs (Google Cloud Storage), local
STORAGE_BACKEND=r2

# --- Cloudflare R2 Configuration (Recommended) ---
# Get these from https://dash.cloudflare.com/ -> R2 -> Manage R2 API Tokens
R2_ACCOUNT_ID=your_cloudflare_account_id
R2_ACCESS_KEY_ID=your_r2_access_key_id
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key
R2_BUCKET_NAME=smartbeak-shards
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
# Optional: Custom domain for public access
# R2_PUBLIC_DOMAIN=https://shards.your-domain.com

# --- AWS S3 Configuration (Alternative) ---
# Uncomment and set these if using AWS S3 instead of R2
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# S3_BUCKET_NAME=smartbeak-shards
# Optional: S3-compatible endpoint (for MinIO, etc.)
# S3_ENDPOINT=https://s3.amazonaws.com

# --- Google Cloud Storage Configuration (Alternative) ---
# Uncomment and set these if using GCS
# GOOGLE_CLOUD_PROJECT_ID=your-gcp-project
# GOOGLE_CLOUD_STORAGE_BUCKET=smartbeak-shards
# Path to service account JSON key file
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# ============================================================
# Shard Deployment Configuration (NEW)
# ============================================================

# Maximum shard size in bytes (default: 10485760 = 10MB)
SHARD_MAX_SIZE_BYTES=10485760

# Maximum files per shard (default: 500)
SHARD_MAX_FILES=500

# File upload concurrency (default: 10)
SHARD_UPLOAD_CONCURRENCY=10

# Deployment timeout in milliseconds (default: 300000 = 5 minutes)
SHARD_DEPLOYMENT_TIMEOUT_MS=300000

# Enable shard versioning (default: true)
SHARD_VERSIONING_ENABLED=true

# Maximum number of versions to keep per site (default: 10)
SHARD_MAX_VERSIONS_PER_SITE=10

# Temporary directory for shard processing (default: system temp)
# SHARD_TEMP_DIR=/tmp/smartbeak-shards

# ============================================================
# Theme Configuration (NEW)
# ============================================================

# Default theme for new sites
DEFAULT_THEME_ID=affiliate-comparison

# Available themes (comma-separated list)
AVAILABLE_THEMES=affiliate-comparison,authority-site,landing-leadgen,local-business,media-newsletter

# Theme template directory (relative to project root)
THEME_TEMPLATE_DIR=themes

# ============================================================
# Required Core Configuration
# ============================================================

# Application Configuration
# NODE_ENV must be explicitly set
# Values: development, production, test
# F34-FIX: No default value - must be explicitly set per environment
NODE_ENV=

# Service name for logging and identification
SERVICE_NAME=smartbeak-api

# Log level for structured logging
# Options: debug, info, warn, error, silent
LOG_LEVEL=info

NEXT_PUBLIC_APP_URL=http://localhost:3000
APP_URL=http://localhost:3000
PORT=3001

# ============================================================
# Logging Configuration
# ============================================================

# Log level for structured logging (default: info in production, debug in development)
# Options: debug, info, warn, error, fatal
LOG_LEVEL=info

# Service name for logging (optional, defaults to package name)
SERVICE_NAME=smartbeak

# Control Plane API URL (used by frontend)
NEXT_PUBLIC_ACP_API=http://localhost:3001

# ============================================================
# Infrastructure & Region
# ============================================================

# Deployment Region (for multi-region setups)
# Options: us-east-1, eu-west-1, ap-southeast-1, etc.
REGION=us-east-1

# ============================================================
# Social Media Publishing (Optional)
# ============================================================

# Facebook Page Access Token
# Get from https://developers.facebook.com/tools/explorer
# Required for Facebook publishing integration
FACEBOOK_PAGE_TOKEN=your_facebook_page_access_token

# LinkedIn Client Credentials
# Get from https://www.linkedin.com/developers/apps
LINKEDIN_CLIENT_ID=your_linkedin_client_id
LINKEDIN_CLIENT_SECRET=your_linkedin_client_secret

# ============================================================
# Domain-specific Database Connections (optional)
# Used for per-domain database routing in multi-tenant setups
# DOMAIN_CONTENT_DB=postgresql://user:pass@localhost:5432/content
# DOMAIN_MEDIA_DB=postgresql://user:pass@localhost:5432/media
# DOMAIN_SEARCH_DB=postgresql://user:pass@localhost:5432/search

# ============================================================
# Business Logic Configuration (Configurable Thresholds)
# ============================================================

# Content Lifecycle Thresholds
# Traffic below this threshold triggers 'prune' action
CONTENT_PRUNE_THRESHOLD=10
# Traffic below this threshold (when content overlaps) triggers 'merge' action  
CONTENT_MERGE_THRESHOLD=50

# SEO Completeness Scoring Weights
# Weight for page count in SEO completeness score (default: 25)
SEO_PAGE_WEIGHT=25
# Target page count for maximum page score (default: 50)
SEO_PAGE_TARGET=50
# Weight for cluster count in SEO completeness score (default: 25)
SEO_CLUSTER_WEIGHT=25
# Target cluster count for maximum cluster score (default: 20)
SEO_CLUSTER_TARGET=20
# Weight for freshness ratio in SEO completeness score (default: 25)
SEO_FRESHNESS_WEIGHT=25
# Weight for schema coverage in SEO completeness score (default: 25)
SEO_SCHEMA_WEIGHT=25

# ============================================================
# API Configuration
# ============================================================

# Timeout for API requests in milliseconds (default: 30000)
API_TIMEOUT_MS=30000

# Rate limit per minute (default: 100)
API_RATE_LIMIT_PER_MINUTE=100

# Maximum request size in bytes (default: 10485760 = 10MB)
API_MAX_REQUEST_SIZE=10485760

# ============================================================
# Job Queue Configuration
# ============================================================

# Number of concurrent workers (default: 5)
JOB_WORKER_CONCURRENCY=5

# Batch size for database operations (default: 100)
JOB_BATCH_SIZE=100

# Maximum number of retries for failed jobs (default: 3)
JOB_MAX_RETRIES=3

# Base delay between retries in milliseconds (default: 1000)
JOB_RETRY_DELAY_MS=1000

# Maximum delay between retries in milliseconds (default: 30000)
JOB_MAX_RETRY_DELAY_MS=30000

# Default job timeout in milliseconds (default: 300000 = 5 minutes)
JOB_DEFAULT_TIMEOUT_MS=300000

# High priority job timeout in milliseconds (default: 120000 = 2 minutes)
JOB_HIGH_PRIORITY_TIMEOUT_MS=120000

# Export job timeout in milliseconds (default: 600000 = 10 minutes)
JOB_EXPORT_TIMEOUT_MS=600000

# Publishing job timeout in milliseconds (default: 300000 = 5 minutes)
JOB_PUBLISHING_TIMEOUT_MS=300000

# Completed jobs to keep per queue (default: 100)
JOB_KEEP_COMPLETED=100

# Failed jobs to keep per queue (default: 50)
JOB_KEEP_FAILED=50

# ============================================================
# Database Configuration
# ============================================================

# Connection pool size (default: 20)
DB_POOL_SIZE=20

# Statement timeout in milliseconds (default: 30000)
DB_STATEMENT_TIMEOUT_MS=30000

# Connection timeout in milliseconds (default: 10000)
DB_CONNECTION_TIMEOUT_MS=10000

# Query timeout for complex operations in milliseconds (default: 60000)
DB_QUERY_TIMEOUT_MS=60000

# ============================================================
# Security Configuration
# ============================================================

# bcrypt rounds for password hashing (default: 12)
BCRYPT_ROUNDS=12

# JWT expiry in seconds (default: 86400 = 24 hours)
JWT_EXPIRY_SECONDS=86400

# JWT clock tolerance in seconds (default: 30)
JWT_CLOCK_TOLERANCE_SECONDS=30

# Max age for JWT token in seconds (default: 604800 = 7 days)
JWT_MAX_AGE_SECONDS=604800

# Maximum failed login attempts before lockout (default: 5)
MAX_FAILED_LOGINS=5

# Account lockout duration in minutes (default: 30)
LOCKOUT_DURATION_MINUTES=30

# Rate limit max requests per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# Rate limit window in milliseconds (default: 60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# Maximum rate limit store size (default: 100000)
MAX_RATE_LIMIT_STORE_SIZE=100000

# Cleanup interval for rate limit store in milliseconds (default: 300000 = 5 minutes)
RATE_LIMIT_CLEANUP_INTERVAL_MS=300000

# ============================================================
# Cache Configuration
# ============================================================

# Default TTL in seconds (default: 300 = 5 minutes)
CACHE_DEFAULT_TTL_SECONDS=300

# Maximum key length (default: 250)
CACHE_MAX_KEY_LENGTH=250

# Cache version for invalidation (default: v2)
CACHE_VERSION=v2

# Default cache prefix (default: cache)
CACHE_PREFIX=cache

# LRU cache max size for abort controllers (default: 10000)
CACHE_ABORT_CONTROLLER_MAX=10000

# LRU cache TTL for abort controllers in milliseconds (default: 3600000 = 1 hour)
CACHE_ABORT_CONTROLLER_TTL_MS=3600000

# Circuit breaker cache max size (default: 100)
CACHE_CIRCUIT_BREAKER_MAX=100

# Circuit breaker cache TTL in milliseconds (default: 3600000 = 1 hour)
CACHE_CIRCUIT_BREAKER_TTL_MS=3600000

# ============================================================
# Retry Configuration
# ============================================================

# Maximum retry attempts (default: 3)
RETRY_MAX_RETRIES=3

# Base delay in milliseconds (default: 1000)
RETRY_BASE_DELAY_MS=1000

# Maximum delay in milliseconds (default: 60000)
RETRY_MAX_DELAY_MS=60000

# Minimum delay in milliseconds (default: 100)
RETRY_MIN_DELAY_MS=100

# Backoff multiplier (default: 2)
RETRY_BACKOFF_MULTIPLIER=2

# ============================================================
# Circuit Breaker Configuration
# ============================================================

# Number of failures before opening circuit (default: 5)
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# Time before attempting to close circuit in milliseconds (default: 30000)
CIRCUIT_BREAKER_RESET_TIMEOUT_MS=30000

# Maximum calls in half-open state (default: 3)
CIRCUIT_BREAKER_HALF_OPEN_MAX_CALLS=3

# Default timeout for circuit breaker operations in milliseconds (default: 300000)
CIRCUIT_BREAKER_TIMEOUT_MS=300000

# ============================================================
# Pagination Configuration
# ============================================================

# Default page size (default: 25)
PAGINATION_DEFAULT_LIMIT=25

# Maximum allowed page size (default: 100)
PAGINATION_MAX_LIMIT=100

# Maximum page size for admin endpoints (default: 1000)
PAGINATION_ADMIN_MAX_LIMIT=1000

# Default admin page size (default: 50)
PAGINATION_ADMIN_DEFAULT_LIMIT=50

# ============================================================
# Abuse Guard Configuration
# ============================================================

# Enable abuse detection (required)
# F34-FIX: Default to true for safety - explicitly disable only in development
ABUSE_GUARD_ENABLED=true

# Maximum requests per minute before blocking (required)
ABUSE_MAX_REQUESTS_PER_MINUTE=100

# Block duration in minutes (required)
ABUSE_BLOCK_DURATION_MINUTES=60

# Suspicious threshold for request rate (required)
ABUSE_SUSPICIOUS_THRESHOLD=80

# Maximum content size for regex processing (default: 10000)
ABUSE_MAX_CONTENT_SIZE=10000

# Regex timeout in milliseconds (default: 100)
ABUSE_REGEX_TIMEOUT_MS=100

# Content length warning threshold (default: 10000)
ABUSE_CONTENT_WARNING_THRESHOLD=10000

# Content length high threshold (default: 50000)
ABUSE_CONTENT_HIGH_THRESHOLD=50000

# Content length critical threshold (default: 100000)
ABUSE_CONTENT_CRITICAL_THRESHOLD=100000

# Risk score for warning content length (default: 5)
ABUSE_WARNING_RISK_SCORE=5

# Risk score for high content length (default: 20)
ABUSE_HIGH_RISK_SCORE=20

# Risk score for critical content length (default: 50)
ABUSE_CRITICAL_RISK_SCORE=50

# High risk threshold score (default: 50)
ABUSE_HIGH_RISK_THRESHOLD=50

# Critical risk threshold score (default: 100)
ABUSE_CRITICAL_RISK_THRESHOLD=100

# Roles allowed to override risk checks (comma-separated, default: admin,security_admin)
ABUSE_ALLOWED_OVERRIDE_ROLES=admin,security_admin

# ============================================================
# Export Configuration
# ============================================================

# Maximum download size in bytes (default: 10485760 = 10MB)
EXPORT_MAX_DOWNLOAD_SIZE=10485760

# Maximum CSV rows (default: 10000)
EXPORT_MAX_CSV_ROWS=10000

# CSV batch size for processing (default: 1000)
EXPORT_CSV_BATCH_SIZE=1000

# Markdown batch size for processing (default: 10)
EXPORT_MARKDOWN_BATCH_SIZE=10

# Maximum content items in markdown export (default: 50)
EXPORT_MARKDOWN_MAX_ITEMS=50

# Export expiry for local files in days (default: 7)
EXPORT_LOCAL_EXPIRY_DAYS=7

# Export expiry for downloads in days (default: 1)
EXPORT_DOWNLOAD_EXPIRY_DAYS=1

# Maximum snippet length in markdown (default: 500)
EXPORT_MARKDOWN_SNIPPET_LENGTH=500

# ============================================================
# Feature Flags (SECURITY: All default to false)
# Explicitly enable only the features you need
# ============================================================

# Enable AI content generation
ENABLE_AI=false

# Enable social media publishing
ENABLE_SOCIAL_PUBLISHING=false

# Enable email marketing features
ENABLE_EMAIL_MARKETING=false

# Enable analytics features
ENABLE_ANALYTICS=false

# Enable affiliate program features
ENABLE_AFFILIATE=false

# Enable experimental features (not recommended for production)
ENABLE_EXPERIMENTAL=false

# Enable beta features (web)
NEXT_PUBLIC_ENABLE_BETA=false

# Enable chat support (web)
NEXT_PUBLIC_ENABLE_CHAT=false

# Enable circuit breaker pattern
# F34-FIX: Default to true for safety
ENABLE_CIRCUIT_BREAKER=true

# Enable rate limiting
# F34-FIX: Default to true for safety
ENABLE_RATE_LIMITING=true

# ============================================================
# Content Idea Generation Configuration
# ============================================================

# Default number of ideas to generate (default: 5)
CONTENT_IDEA_DEFAULT_MAX=5

# Maximum ideas allowed per request (default: 50)
CONTENT_IDEA_MAX_IDEAS=50

# Minimum read time in minutes (default: 5)
CONTENT_IDEA_MIN_READ_TIME=5

# Maximum read time variance in minutes (default: 10)
CONTENT_IDEA_MAX_READ_TIME_VARIANCE=10

# Average word count base (default: 1500)
CONTENT_IDEA_AVG_WORD_COUNT_BASE=1500

# Average word count variance (default: 1000)
CONTENT_IDEA_AVG_WORD_COUNT_VARIANCE=1000

# Maximum concurrent batches (default: 5)
CONTENT_IDEA_MAX_CONCURRENT_BATCHES=5

# Maximum keywords per idea (default: 3)
CONTENT_IDEA_MAX_KEYWORDS=3

# AI generation circuit breaker failure threshold (default: 5)
CONTENT_IDEA_AI_FAILURE_THRESHOLD=5

# AI generation circuit breaker reset timeout in milliseconds (default: 30000)
CONTENT_IDEA_AI_RESET_TIMEOUT_MS=30000

# ============================================================
# Redis Configuration
# ============================================================

# Maximum reconnection attempts (default: 10)
REDIS_MAX_RECONNECT_ATTEMPTS=10

# Initial reconnect delay in milliseconds (default: 1000)
REDIS_INITIAL_RECONNECT_DELAY_MS=1000

# Maximum reconnect delay in milliseconds (default: 30000)
REDIS_MAX_RECONNECT_DELAY_MS=30000

# Connection timeout in milliseconds (default: 10000)
REDIS_CONNECT_TIMEOUT_MS=10000

# Command timeout in milliseconds (default: 5000)
REDIS_COMMAND_TIMEOUT_MS=5000

# Keepalive interval in milliseconds (default: 30000)
REDIS_KEEP_ALIVE_MS=30000

# Wait for connection timeout in milliseconds (default: 30000)
REDIS_WAIT_TIMEOUT_MS=30000

# Max retries per request (default: 3)
REDIS_MAX_RETRIES_PER_REQUEST=3

# ============================================================
# Timeout Configuration (for external APIs)
# ============================================================

# Short timeout for health checks in milliseconds (default: 5000)
TIMEOUT_SHORT_MS=5000

# Medium timeout for normal operations in milliseconds (default: 15000)
TIMEOUT_MEDIUM_MS=15000

# Long timeout for complex operations in milliseconds (default: 30000)
TIMEOUT_LONG_MS=30000

# Extended timeout for uploads/downloads in milliseconds (default: 60000)
TIMEOUT_EXTENDED_MS=60000

# Maximum bounded timeout in milliseconds (default: 300000 = 5 minutes)
TIMEOUT_MAX_BOUNDED_MS=300000

# ============================================================
# Publishing Configuration
# ============================================================

# Circuit breaker failure threshold (default: 3)
PUBLISHING_CB_FAILURE_THRESHOLD=3

# Circuit breaker reset timeout in milliseconds (default: 30000)
PUBLISHING_CB_RESET_TIMEOUT_MS=30000

# Circuit breaker half-open max calls (default: 2)
PUBLISHING_CB_HALF_OPEN_MAX_CALLS=2

# Default max retries for publishing (default: 3)
PUBLISHING_DEFAULT_MAX_RETRIES=3

# Default backoff in milliseconds (default: 1000)
PUBLISHING_DEFAULT_BACKOFF_MS=1000

# Maximum delay in milliseconds (default: 30000)
PUBLISHING_MAX_DELAY_MS=30000

# Job timeout in milliseconds (default: 300000 = 5 minutes)
PUBLISHING_JOB_TIMEOUT_MS=300000

# ============================================================
# CDN / Embed Form Configuration
# Required for opt-in form embed snippets. No hardcoded fallbacks.
# ============================================================

# CDN base URL for serving form scripts (server-side)
CDN_BASE_URL=https://cdn.acp.io

# CDN base URL (browser-side, Next.js)
NEXT_PUBLIC_CDN_BASE_URL=https://cdn.acp.io

# Forms base URL for iframe embeds (server-side)
FORMS_BASE_URL=https://acp.io

# Forms base URL (browser-side, Next.js)
NEXT_PUBLIC_FORMS_BASE_URL=https://acp.io

# ============================================================
# Frontend (Web) Configuration
# Variables prefixed with NEXT_PUBLIC_ are exposed to the browser
# ============================================================

# Cache version for client-side cache invalidation (default: v2)
NEXT_PUBLIC_CACHE_VERSION=v2

# Default cache prefix (default: cache)
NEXT_PUBLIC_CACHE_PREFIX=cache

# Default cache TTL in seconds (default: 300 = 5 minutes)
NEXT_PUBLIC_CACHE_DEFAULT_TTL_SECONDS=300

# Maximum cache key length (default: 250)
NEXT_PUBLIC_CACHE_MAX_KEY_LENGTH=250

# API timeout in milliseconds (default: 30000)
NEXT_PUBLIC_API_TIMEOUT_MS=30000

# API rate limit per minute (default: 100)
NEXT_PUBLIC_API_RATE_LIMIT_PER_MINUTE=100

# Maximum request size in bytes (default: 10485760 = 10MB)
NEXT_PUBLIC_API_MAX_REQUEST_SIZE=10485760

# Default pagination limit (default: 25)
NEXT_PUBLIC_PAGINATION_DEFAULT_LIMIT=25

# Maximum pagination limit (default: 100)
NEXT_PUBLIC_PAGINATION_MAX_LIMIT=100

# JWT clock tolerance in seconds (default: 30)
NEXT_PUBLIC_JWT_CLOCK_TOLERANCE_SECONDS=30

# JWT max age in seconds (default: 604800 = 7 days)
NEXT_PUBLIC_JWT_MAX_AGE_SECONDS=604800
